/*
Copyright 2017-2024 SensiML Corporation

This file is part of SensiML™ Piccolo AI™.

SensiML Piccolo AI is free software: you can redistribute it and/or
modify it under the terms of the GNU Affero General Public License
as published by the Free Software Foundation, either version 3 of
the License, or (at your option) any later version.

SensiML Piccolo AI is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public
License along with SensiML Piccolo AI. If not, see <https://www.gnu.org/licenses/>.
*/

"use strict";(self.webpackChunksensiml_web=self.webpackChunksensiml_web||[]).push([[830],{1577:(e,t,a)=>{a.d(t,{A:()=>m});a(65043);var l=a(68903),i=a(85865),n=a(96446),o=a(69120),r=a(7478),s=a(98424),d=a(6011),c=a(34294),u=a(70579);const m=e=>{let{title:t,subtitle:a,onClickBack:m,actionsBtns:p,turncateLenght:x=0}=e;const h=(0,r.A)((e=>({panelWrapper:{padding:"0.75rem 1rem"},textWrapper:{display:"flex",alignItems:"center"},actionWrapper:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:e.spacing(.5),marginLeft:"auto"},stepperBackButton:{marginRight:e.spacing(2)},titleRoot:{fontSize:e.spacing(2.5)}})))();return(0,u.jsx)(d.W,{children:(0,u.jsxs)(l.Ay,{container:!0,className:h.panelWrapper,children:[(0,u.jsxs)(l.Ay,{item:!0,className:h.textWrapper,children:[m?(0,u.jsx)(c.tA,{className:h.stepperBackButton,onClick:m,color:"primary",size:"small",children:(0,u.jsx)(o.A,{})}):null,(0,u.jsx)(i.A,{variant:"h2",classes:{root:h.titleRoot},children:t&&(0,s.Ud)(t,x)}),(0,u.jsx)(n.A,{alignItems:"center",ml:2,children:a})]}),(0,u.jsx)(l.Ay,{item:!0,className:h.actionWrapper,children:p})]})})}},20210:(e,t,a)=>{a.d(t,{$:()=>y});var l=a(65043),i=a(53536),n=a.n(i),o=a(11906),r=a(98533),s=a(96446),d=a(67784),c=a(7426),u=a(59478),m=a(7478),p=a(51787),x=a(70579);const h=e=>{let{presetColors:t,defautColor:a,label:i,onUpdate:n}=e;const o=(0,m.A)((e=>({colorBox:{marginRight:e.spacing(1),height:e.spacing(3),width:e.spacing(3),cursor:"pointer",transition:e.transitions.create(["all"],{duration:e.transitions.duration.complex}),"&:hover":{transform:"scale(1.15)"}}})))(),[r,c]=(0,l.useState)(!1),[h,f]=(0,l.useState)(""),g=e=>{f(e),n(e)};return(0,l.useEffect)((()=>{f(a)}),[a]),(0,x.jsxs)("div",{style:{width:"100%"},children:[(0,x.jsx)(d.A,{autoFocus:!0,margin:"dense",id:"labelColorPicker",label:i,value:h,onChange:e=>{var t;return g((null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)||"")},fullWidth:!0,variant:"outlined",InputProps:{startAdornment:(0,x.jsx)(p.A,{position:"start",children:(0,x.jsx)(s.A,{className:o.colorBox,onClick:()=>c(!0),style:{background:h}})})}}),r?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.A,{style:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},onClick:()=>c(!1)}),(0,x.jsx)("div",{style:{position:"fixed",zIndex:"2"},children:(0,x.jsx)(u.Xq,{color:h,disableAlpha:!0,onChange:e=>g(e.hex),presetColors:t})})]}):null]})};h.defaultProps={presetColors:[],onUpdate:()=>{}};const f=h;var g=a(18545),v=a(4172),b=a(97557),j=a(81131);const A=e=>{let{isOpen:t,title:a,description:i,labelName:u,defaultLabelColor:m,getLabelNamesToCheck:p,labelGroupOptions:h,defaultLabelGroup:A,onClose:y,onSubmit:C,validationError:S}=e;const{t:w}=(0,c.B)("components"),[D,T]=(0,l.useState)(),[k,E]=(0,l.useState)(),[N,I]=(0,l.useState)(),[P,M]=(0,l.useState)(""),[B,O]=(0,l.useState)(!1),L=(0,l.useMemo)((()=>p(P||A).filter((e=>e!==n().toLower(u)&&e!==n().toLower(b.dG.value)))),[P,A,u,p]),_=(0,l.useMemo)((()=>k||m||(0,b.Vy)(L.length)),[k,L,m]),U=()=>{y()},z=()=>{O(!1),I(""),T("")};return(0,l.useEffect)((()=>{S&&(O(!1),I(S))}),[S]),(0,l.useEffect)((()=>{T(u)}),[u]),(0,l.useEffect)((()=>{t||z()}),[t]),(0,l.useEffect)((()=>()=>z()),[]),(0,x.jsx)(v.A,{disableEscapeKeyDown:!0,isOpen:t,onClose:U,title:a,actionsComponent:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o.A,{onClick:U,color:"primary",variant:"outlined",fullWidth:!0,children:w("Cancel")}),(0,x.jsx)(o.A,{onClick:()=>{var e;((e=D)?!L.includes(n().toLower(e))||(I(w("dialog-form-label.validation-error-duplicate",{labelName:e})),0):(I(w("dialog-form-label.validation-error-empty")),0))&&(O(!0),C(D,_,P))},color:"primary",variant:"contained",fullWidth:!0,children:w("Save")})]}),children:(0,x.jsx)(x.Fragment,{children:B?(0,x.jsx)(j._S,{isOpen:!0}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(r.A,{id:"form-dialog-content",children:i}),(null===h||void 0===h?void 0:h.length)>1&&!u?(0,x.jsx)(s.A,{mb:2,children:(0,x.jsx)(g.A,{id:"select_label",name:"select_label",label:w("dialog-form-label.label-group"),options:h,variant:"outlined",margin:"dense",defaultValue:A,onChange:(e,t)=>{I(""),M(t)}})}):null,(0,x.jsx)(s.A,{marginBottom:2,children:(0,x.jsx)(d.A,{error:Boolean(N),helperText:N,autoFocus:!0,margin:"dense",id:"DialogFormlabelName",label:w("dialog-form-label.label-name"),required:!0,defaultValue:u,onChange:e=>{var t;I(""),T(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},fullWidth:!0,variant:"outlined"})}),(0,x.jsx)(s.A,{marginBottom:2,children:(0,x.jsx)(f,{presetColors:b.ji,defautColor:_,label:w("dialog-form-label.label-color"),onUpdate:e=>{E(e)}})})]})})})};A.defaultProps={onSubmit:()=>{},onClose:()=>{}};const y=A},18545:(e,t,a)=>{a.d(t,{A:()=>v});var l=a(65043),i=a(53536),n=a.n(i),o=a(17392),r=a(22505),s=a(7478),d=a(96446),c=a(53193),u=a(79190),m=a(72221),p=a(32143),x=a(11906),h=a(71612),f=a(70579);const g=e=>{let{name:t,label:a,variant:i,options:g,defaultValue:v,id:b,labelId:j,addBtnText:A,onChange:y,onClickAdd:C,isCleared:S,fullWidth:w,isUpdateWithDefault:D=!0,isObserveDefaultValue:T=!1,disabled:k,...E}=e;const N=(0,s.A)((()=>({selectRoot:{width:"100%",display:"inline-grid"},selectWrapper:{display:"inline-grid",gridTemplateColumns:"auto 3rem",alignItems:"center"},addBtn:{display:"flex",justifyContent:"flex-start",paddingLeft:"1rem"}})))(),[I,P]=(0,l.useState)(""),M=()=>{n().isUndefined(v)||(P(v),D&&y(t,v))};(0,l.useEffect)((()=>{T||M()}),[]),(0,l.useEffect)((()=>{T&&M()}),[v]);return(0,f.jsx)(f.Fragment,{children:void 0!==I?(0,f.jsxs)(d.A,{className:"".concat(N.selectRoot," ").concat(S&&N.selectWrapper),children:[(0,f.jsxs)(c.A,{fullWidth:w,variant:i,children:[a?(0,f.jsx)(u.A,{id:j,children:a}):null,(0,f.jsxs)(m.A,{...E,labelId:j,id:b,value:I||"",onChange:e=>{var a,l;if((null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)===I)P(""),y(t,null);else if(null!==e&&void 0!==e&&null!==(l=e.target)&&void 0!==l&&l.value){var i,n;P(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value),y(t,null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)}},name:t,label:a,disabled:k,children:[null!==g&&void 0!==g&&g.length?g.map(((e,t)=>(0,f.jsx)(p.A,{id:"".concat(b,"_").concat(t),value:e.value,children:e.name},"".concat(b,"_").concat(t,"_").concat(e.value)))):(0,f.jsx)(f.Fragment,{}),C?(0,f.jsx)(x.A,{className:N.addBtn,color:"primary",fullWidth:!0,startIcon:(0,f.jsx)(r.A,{}),onClick:()=>{C&&C()},children:A}):null]})]}),S?(0,f.jsx)(o.A,{onClick:()=>{P(""),y(t,null)},"aria-label":"delete",size:"large",children:(0,f.jsx)(h.A,{})}):null]}):null})};g.defaultProps={isCleared:!1,fullWidth:!0};const v=g},46342:(e,t,a)=>{a.d(t,{A:()=>r});var l=a(65043),i=a(53193),n=a(67784),o=a(70579);const r=e=>{let{defaultValue:t,helperText:a,error:r,name:s,label:d,onChange:c,className:u,id:m,fullWidth:p=!0,isUpdateWithDefault:x=!0,isObserveDefaultValue:h=!1,...f}=e;const[g,v]=(0,l.useState)("");(0,l.useEffect)((()=>{void 0!==t&&(v(t),x&&c(s,t))}),[]),(0,l.useEffect)((()=>{void 0!==t&&h&&(v(t),h&&c(s,t))}),[t]);return(0,o.jsx)(i.A,{fullWidth:p,children:(0,o.jsx)(n.A,{id:m,className:u,value:g,label:d,error:r,onChange:e=>{var t;t=e.target.value,v(t),c(s,e.target.value)},helperText:a,...f})})}},83746:(e,t,a)=>{a.d(t,{A:()=>H});var l=a(97508),i=a(38916),n=a(19490),o=a(28704),r=a(20697),s=a(65043),d=a(53536),c=a.n(d),u=a(7426),m=a(91688),p=a(95540),x=a(63471),h=a(77739),f=a(17392),g=a(1995),v=a(12220),b=a(81637),j=a(5259),A=a(75882),y=a(52437),C=a(6011),S=a(34294),w=a(95004),D=a(41104),T=a(97111),k=a(83462),E=a(26600),N=a(35316),I=a(98533),P=a(67784),M=a(29347),B=a(11906),O=a(26480),L=a(85502),_=a(70579);const U=e=>{let{isOpen:t,parrentError:a,modelName:l,modelList:i,selectedModel:n,selectedPipeline:o,onClose:r,onSave:d}=e;const{t:m}=(0,u.B)("models"),[p,x]=(0,s.useState)(),[h,f]=(0,s.useState)();(0,s.useEffect)((()=>{x(l)}),[l]),(0,s.useEffect)((()=>{f(a)}),[a]);return(0,_.jsxs)(k.A,{disableEscapeKeyDown:!0,open:t,onClose:r,id:"renameKnowledgePack","aria-labelledby":"form-dialog-title",children:[(0,_.jsx)(E.A,{id:"form-dialog-title",children:m("dialog-rename-models-title")}),(0,_.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{if(!p)return void f(m("dialog-rename-models-error-requaried"));if(c().isArray(i)&&i.find((e=>e.name.toUpperCase()===p.toUpperCase()&&e.sandbox_uuid===o)))return void f(m("dialog-rename-models-error-exist",{newModelName:p}));const e=i.find((e=>e.uuid===n)),t=new RegExp("^".concat(e.name,"_"),"g"),a=[{uuid:n,newName:p}];c().isEmpty(null===e||void 0===e?void 0:e.knowledgepack_description)||c().keys(e.knowledgepack_description).forEach((l=>{if("Parent"!==l){const i="".concat(p,"_").concat(l.replace(t,""));if(i.length>40)return void f(m("dialog-rename-models-error-limit",{newModelName:p}));a.push({uuid:e.knowledgepack_description[l].uuid,newName:i})}})),d(a)})()},children:[(0,_.jsxs)(N.A,{children:[(0,_.jsx)(I.A,{id:"form-dialog-content",children:m("dialog-rename-models-subtitle")}),(0,_.jsx)(P.A,{error:Boolean(h),helperText:h,autoFocus:!0,margin:"dense",id:"newKnowledgepackName",label:"Name",required:!0,defaultValue:l,onChange:e=>{e.preventDefault();const{value:t}=e.target;x(t)},fullWidth:!0})]}),(0,_.jsxs)(M.A,{id:"renameKnowledgepackActions",children:[(0,_.jsx)(B.A,{onClick:r,startIcon:(0,_.jsx)(L.A,{}),color:"primary",variant:"outlined",children:m("dialog-rename-models-cancel-btn")}),(0,_.jsx)(B.A,{type:"submit",startIcon:(0,_.jsx)(O.A,{}),color:"primary",variant:"outlined",children:m("dialog-rename-models-confirm-btn")})]})]})]})};var z=a(1967),F=a(5011),W=a(7478);const V=()=>(0,W.A)((e=>({root:{flexGrow:1},errorDiv:{marginTop:-22,minHeight:50},errorMessage:{color:e.palette.error.main},addNewButton:{marginRight:20,marginTop:20},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})))(),R=e=>{let{tableTitle:t,knowledgepacks:a,selectedProject:l,deleteModel:i,loadKnowledgepacks:n,renameModel:o,openRouterRedirect:r,openTitle:d}=e;const{t:k}=(0,u.B)("models"),E=z.c.find((e=>e.title===z.hW.TestModel)),N=z.c.find((e=>e.title===z.hW.DownloadModel)),I=z.c.find((e=>e.title===z.hW.ExploreModel)),P=(0,m.useHistory)(),M=V(),[B,O]=(0,s.useState)([]),[L,W]=(0,s.useState)(null),[R,$]=(0,s.useState)(null),[H,q]=(0,s.useState)(null),[G,Q]=(0,s.useState)(null),[K,Z]=(0,s.useState)(null),[Y,X]=(0,s.useState)([]),[J,ee]=(0,s.useState)(!1),[te,ae]=(0,s.useState)(!1),[le,ie]=(0,s.useState)(!1),[ne,oe]=(0,s.useState)(!1),[re,se]=(0,s.useState)(""),[de,ce]=(0,s.useState)("success"),[ue,me]=(0,s.useState)(!1),pe=(0,s.useMemo)((()=>c().isEmpty(Y)?k("model-table.dialog-delete-text",{name:G}):k("model-table.dialog-delete-multi-text",{count:null===Y||void 0===Y?void 0:Y.length})),[G,Y]),xe=(0,s.useMemo)((()=>c().isEmpty(Y)),[Y]),he=(0,s.useMemo)((()=>c().union(Y,[K]).filter((e=>e))),[Y,K]);(0,s.useEffect)((()=>{a.data=D.A.sortObjects(a.data||[{}],"created_at",!1,"dsc"),O(a)}),[a]);const fe=(e,t)=>{se(t),ce(e),oe(!0)},ge=(e,t,a)=>{P.push((0,m.generatePath)(e,{projectUUID:l,pipelineUUID:t,modelUUID:a}))},ve=(e,t)=>{"clickaway"!==t&&oe(!1)},be=(e,t)=>{Z(e),Q(t),ae(!0)},je=()=>{ae(!1)},Ae=(e,t)=>{let a=null;return e&&!e.isFetching&&e.data&&0!==!e.data.length?(a={},e.data.forEach((e=>a[e[t]]=e[t])),a):a},ye=[{title:"Name",field:"name",primary:!0,sortable:!0,type:y.$.Text,filterable:!0,render:(e,t)=>{const a=r||T.bw.MAIN.MODEL_EXPLORE.path,l=d||"Explore model";return(0,_.jsx)(F.H,{color:"primary",tooltipTitle:"".concat(l,": ").concat(e),onClick:()=>ge(a,t.sandbox_uuid,t.uuid),children:e})}},{title:"Classifier",field:"classifier_name",sortable:!0,type:y.$.Text,filterable:!0,lookup:Ae(B,"classifier_name")},{title:"Accuracy",field:"accuracy",sortable:!0,type:y.$.Numeric,filterable:!0,render:e=>!e||Number.isNaN(e)||""===e?e:"".concat(Number(e).toFixed(2)," %")},{title:"Model Size (Bytes)",field:"model_size",sortable:!0,type:y.$.Numeric,filterable:!0},{title:"Feature Count",field:"features_count",sortable:!0,type:y.$.Numeric,filterable:!0},{title:"Pipeline",field:"sandbox_name",sortable:!0,type:y.$.Text,filterable:!0,lookup:Ae(B,"sandbox_name")},{title:"Created Date",field:"created_at",render:e=>D.A.convertToLocalDateTime(e),sortable:!0,type:y.$.DateTime,filterable:!0},{title:"UUID",field:"uuid",sortable:!0,type:y.$.Text,filterable:!0},{title:"Explore",field:"uuid",render:(e,t)=>(0,_.jsx)(h.A,{title:"Explore Model",children:(0,_.jsx)(f.A,{variant:"contained",color:"primary",size:"small",onClick:()=>ge(T.bw.MAIN.MODEL_EXPLORE.path,t.sandbox_uuid,e),children:I.iconfn()})})},{title:"Test",field:"uuid",render:(e,t)=>(0,_.jsx)(h.A,{title:"Test Model",children:(0,_.jsx)(f.A,{variant:"contained",color:"primary",size:"small",onClick:()=>ge(T.bw.MAIN.MODEL_TEST.path,t.sandbox_uuid,e),children:E.iconfn()})})},{title:"Download",field:"uuid",render:(e,t)=>(0,_.jsx)(h.A,{title:"Download Knowledge Pack",children:(0,_.jsx)(f.A,{variant:"contained",color:"primary",size:"small",onClick:()=>ge(T.bw.MAIN.MODEL_DOWNLOAD.path,t.sandbox_uuid,e),children:N.iconfn()})})},{title:"Rename",field:"uuid",render:(e,t)=>(0,_.jsx)(h.A,{title:"Rename Knowledgepack",children:(0,_.jsx)(f.A,{variant:"contained",color:"primary",size:"small",onClick:a=>{return l=e,i=t.name,n=t.sandbox_uuid,$(n),W(l),q(i),void ie(!0);var l,i,n},children:(0,_.jsx)(p.A,{})})})},{title:k("model-table.title-delete"),field:"uuid",render:(e,t)=>(0,_.jsx)(h.A,{title:k("model-table.tooltip-delete"),children:(0,_.jsx)(f.A,{variant:"contained",color:"primary",size:"small",disabled:!xe,onClick:a=>be(e,null===t||void 0===t?void 0:t.name),children:(0,_.jsx)(x.A,{})})})}],Ce={rowsPerPage:25,rowsPerPageOptions:[10,25,50,100,"All"],showPagination:!0,applyFilters:!0,noContentText:"No Knowledge Packs",excludePrimaryFromDetails:!0,isDarkHeader:!0,selectionField:"uuid",isShowSelection:!0,onSelectInTable:e=>{X(e)}};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(C.f,{title:t||k("model-table.title"),onRefresh:()=>{n(l)},ActionComponent:(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(S.U,{icon:(0,_.jsx)(x.A,{}),variant:"outlined",color:"primary",disabled:xe,onClick:()=>be(),text:k("Delete")})})}),(0,_.jsx)(j.A,{tableId:"knowledgePackTable",tableColumns:ye,tableData:B,tableOptions:Ce}),(0,_.jsx)(U,{modelName:H,isOpen:le,onClose:()=>{ie(!1)},modelList:(null===B||void 0===B?void 0:B.data)||[],selectedModel:L,selectedPipeline:R,onSave:async e=>{me(!0),ie(!1);try{const t=await o(l,R,L,e);if("error"===t.status)return fe("warning",t.details),me(!1),void n(l)}catch(t){return fe("error",t.message),void me(!1)}n(l),fe("success","Successfuly renamed the Knowledgepack."),me(!1)}}),(0,_.jsx)(w.Z,{isOpen:te,title:k("model-table.dialog-delete-title"),text:pe,isLoading:J,onConfirm:()=>(async()=>{const e=[];ee(!0);for(const a of he)try{await i(a),e.push(a)}catch(t){fe("error",t.message)}e.includes(K)&&Z(""),c().isEmpty(Y)||X(Y.filter((t=>!e.includes(t)))),null!==e&&void 0!==e&&e.length&&fe("success",k("model-table.msg-success-delete")),ee(!1),je(),n(l),Q(null)})(),onCancel:()=>je(),cancelText:k("dialog-confirm-delete.cancel"),confirmText:k("dialog-confirm-delete.delete")}),(0,_.jsx)(g.A,{anchorOrigin:{vertical:"top",horizontal:"right"},open:ne,autoHideDuration:2e3,onClose:ve,children:(0,_.jsx)(A.A,{onClose:ve,variant:de,message:re})}),(0,_.jsx)(v.A,{className:M.backdrop,open:ue,children:(0,_.jsx)(b.A,{size:100})})]})},$={setActiveView:r.U7,setSelectedPipeline:o.E5,setSelectedModel:i.xH,deleteModel:i.De,loadKnowledgepacks:n.R,loadModels:i.Zl,renameModel:i.oB},H=(0,l.Ng)((e=>{var t,a;return{knowledgepacks:e.knowledgepacks,selectedProject:null===(t=e.projects)||void 0===t||null===(a=t.selectedProject)||void 0===a?void 0:a.uuid}}),$)(R)},14381:(e,t,a)=>{a.d(t,{A:()=>o});a(65043);var l=a(7478),i=a(96446),n=a(70579);const o=e=>{let{name:t,color:a,className:o=""}=e;const r=(0,l.A)((e=>({wrapper:{display:"flex",alignItems:"center",width:"100%"},colorBox:{marginRight:e.spacing(1),height:"1rem",width:"1rem"}})))();return(0,n.jsxs)(i.A,{className:r.wrapper,children:[(0,n.jsx)(i.A,{className:r.colorBox,style:{background:a}}),(0,n.jsx)("span",{className:"".concat(r.name," ").concat(o),children:t})]})}},14274:(e,t,a)=>{a.d(t,{A:()=>r});a(65043);var l=a(72437),i=a(32143),n=a(34815),o=a(70579);const r=e=>{let{archorEl:t,isOpen:a,onClose:r,onDownloadPipeline:s}=e;const{DOWNLOAD_TYPES:d}=n.cd;return(0,o.jsxs)(l.A,{id:"menu-appbar",anchorEl:t,open:a,onClose:()=>r(),MenuListProps:{"aria-labelledby":"pipeline-export-menu"},children:[(0,o.jsx)(i.A,{onClick:e=>s(d.JSON),children:"Export as JSON "}),(0,o.jsx)(i.A,{onClick:e=>s(d.PYTHON),children:"Export as Python"}),(0,o.jsx)(i.A,{onClick:e=>s(d.IPYNB),children:"Export as IPYNB"})]})}},28537:(e,t,a)=>{a.d(t,{A:()=>_});var l=a(97508),i=a(38916),n=a(19490),o=a(28704),r=a(65043),s=a(53536),d=a.n(s),c=a(91688),u=a(7426),m=a(77739),p=a(17392),x=a(1995),h=a(12220),f=a(81637),g=a(63471),v=a(39423),b=a(11313),j=a(40430),A=a(2865),y=a(5259),C=a(75882),S=a(14274),w=a(41104),D=a(34294),T=a(97111),k=a(95004),E=a(52437),N=a(5011),I=a(6011),P=a(7478);const M=()=>(0,P.A)((e=>({...e.common,root:{flexGrow:1},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})))();var B=a(70579);const O=e=>{let{onUpdateProjectAction:t,selectedProject:a,pipelines:l,knowledgepacks:i,loadKnowledgepacks:n,deletePipeline:o,loadPipelines:s,exportPipeline:P}=e;const{t:O}=(0,u.B)("pipelines"),L=M(),_=(0,c.useHistory)(),[U,z]=(0,r.useState)([]),[F,W]=(0,r.useState)(!1),[V,R]=(0,r.useState)(!1),[$,H]=(0,r.useState)(""),[q,G]=(0,r.useState)("success"),[Q,K]=(0,r.useState)(!1),[Z,Y]=(0,r.useState)([]),[X,J]=(0,r.useState)(""),[ee,te]=r.useState(null),[ae,le]=(0,r.useState)(0),[ie,ne]=(0,r.useState)(null),[oe,re]=(0,r.useState)(),se=Boolean(ie),de=(0,r.useMemo)((()=>{const e="".concat(O("table.dialog-delete-model-counts-text",{modelCounts:ae})," "),t=null!==Z&&void 0!==Z&&Z.length?O("table.dialog-delete-multi-text",{count:null===Z||void 0===Z?void 0:Z.length}):O("table.dialog-delete-text",{selectedPipelineName:ee});return"".concat(ae?e:"").concat(t)}),[ae,ee,Z]),ce=(0,r.useMemo)((()=>d().isEmpty(Z)),[Z]),ue=(0,r.useMemo)((()=>d().union(Z,[X]).filter((e=>e))),[Z,X]),me=(e,t)=>{"clickaway"!==t&&R(!1)},pe=(e,t,a)=>{le(a),te(t),J(e),W(!0)},xe=()=>{J(""),W(!1)},he=e=>w.A.convertToLocalDateTime(e),fe=(e,t)=>{H(t),G(e),R(!0)},ge=[{title:"Name",field:"name",primary:!0,sortable:!0,type:E.$.Text,filterable:!0,render:(e,t)=>(0,B.jsx)(N.H,{color:"primary",onClick:e=>{return l=t.uuid,void _.push((0,c.generatePath)(T.bw.MAIN.MODEL_BUILD.child.BUILDER_SCREEN.path,{projectUUID:a,pipelineUUID:l}),{isOptimizeAutoMLParams:!0});var l},tooltipTitle:"Open ".concat(e),children:e})},{title:"Knowledge Pack Count",field:"kpCount",sortable:!0,type:E.$.Numeric,filterable:!0},{title:"Created Date",field:"created_at",sortable:!0,type:E.$.DateTime,filterable:!0,render:he},{title:"Modified Date",field:"last_modified",sortable:!0,type:E.$.DateTime,filterable:!0,render:he},{title:"UUID",field:"uuid",sortable:!0,type:E.$.Text,filterable:!0},{title:"Running",field:"active",sortable:!0,render:e=>(0,B.jsx)("div",{children:!0===e?(0,B.jsx)(m.A,{title:"Pipeline currently executing.",children:(0,B.jsx)(v.A,{variant:"contained",color:"primary",size:"small"})}):(0,B.jsx)("div",{})}),filterable:!0},{title:"CPU Usage (Minutes)",field:"cpu_clock_time",sortable:!0,render:e=>(0,B.jsx)(m.A,{title:O("table.tooltip-cpu-time"),children:(0,B.jsx)("div",{children:(e/60).toFixed(1)})}),filterable:!0},{title:"Export",field:"uuid",render:(e,t)=>(0,B.jsx)(m.A,{title:O("table.tooltip-download"),children:(0,B.jsx)(p.A,{variant:"contained",color:"primary",size:"small",onClick:t=>(t=>{ne(t.currentTarget),re(e)})(t),download:"".concat(t.name,".json"),children:(0,B.jsx)(A.A,{})})})},{title:"Delete",field:"uuid",render:(e,t)=>(0,B.jsx)(m.A,{title:"Delete Pipeline",children:(0,B.jsx)(p.A,{variant:"contained",color:"primary",size:"small",disabled:!ce,onClick:()=>pe(e,t.name,t.kpCount),children:(0,B.jsx)(g.A,{})})})}];(0,r.useEffect)((()=>{l&&l.data&&i&&i.data&&l.data.forEach((e=>{e.kpCount=i.data.filter((t=>t.sandbox_uuid===e.uuid)).length})),l.data=w.A.sortObjects(l.data||[{}],"last_modified",!1,"dsc"),z(l)}),[l,i]);const ve={rowsPerPage:25,rowsPerPageOptions:[5,10,25,50,100,"All"],showPagination:!0,applyFilters:!0,isDarkHeader:!0,isShowSelection:!0,selectionField:"uuid",onSelectInTable:e=>{Y(e)},noContentText:"No Pipelines"};return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(I.f,{title:O("table.title"),onRefresh:()=>s(a),ActionComponent:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(D.U,{variant:"outlined",color:"primary",onClick:()=>pe(),ml:2,tooltip:O("Delete"),disabled:ce,text:O("Delete"),icon:(0,B.jsx)(g.A,{}),className:L.mr1}),(0,B.jsx)(D.U,{color:"primary",variant:"outlined",icon:(0,B.jsx)(b.A,{}),endIcon:(0,B.jsx)(j.A,{}),onClick:e=>ne(e.currentTarget),disabled:ce,text:O("Export")})]})}),(0,B.jsx)(y.A,{tableId:"pipelinesTable",tableColumns:ge,tableData:U,tableOptions:ve}),(0,B.jsx)(k.Z,{isOpen:F,title:O("table.dialog-delete-title"),text:de,onConfirm:async()=>{const e=[];K(!0);for(const t of ue){const l=await o(a,t);"success"!==l.status?fe("error",l.details):e.push(t)}e.includes(X)&&J(""),d().isEmpty(Z)||Y(Z.filter((t=>!e.includes(t)))),s(a),n(a),t&&t(),null!==e&&void 0!==e&&e.length&&fe("success","Successfully deleted the Pipeline ".concat(ee,".")),xe(),K(!1)},onCancel:xe,cancelText:O("dialog-confirm-delete.cancel"),confirmText:O("dialog-confirm-delete.delete"),isLoading:Q}),(0,B.jsx)(x.A,{anchorOrigin:{vertical:"top",horizontal:"right"},open:V,autoHideDuration:2e3,onClose:me,children:(0,B.jsx)(C.A,{onClose:me,variant:q,message:$})}),(0,B.jsx)(h.A,{className:L.backdrop,open:Q,children:(0,B.jsx)(f.A,{size:100})}),(0,B.jsx)(S.A,{archorEl:ie,isOpen:se,onClose:()=>{ne(null),oe&&re(null)},onDownloadPipeline:async e=>{if(oe)try{await P(a,oe,e)}catch(t){fe("error",t.message)}else for(const l of ue)try{await P(a,l,e)}catch(t){fe("error",t.message)}}})]})},L={loadModels:i.Zl,loadKnowledgepacks:n.R,deletePipeline:o.gP,loadPipelines:o.IR,exportPipeline:o.dU},_=(0,l.Ng)((e=>({selectedProject:e.projects.selectedProject.uuid,pipelines:e.pipelines.pipelineList,knowledgepacks:e.knowledgepacks})),L)(O)},29299:(e,t,a)=>{a.d(t,{A:()=>W});var l=a(97508),i=a(27802),n=a(65043),o=a(53536),r=a.n(o),s=a(7426),d=a(91688),c=a(77739),u=a(17392),m=a(1995),p=a(12220),x=a(81637),h=a(95540),f=a(63471),g=a(72126),v=a(5259),b=a(75882),j=a(43024),A=a(96446),y=a(69322),C=a(45119),S=a(1980),w=a(12490),D=a(7478);const T=()=>(0,D.A)((e=>({statusBox:{padding:"0.25rem 0.5rem",border:"2px solid ".concat(e.palette.notSelected.light),borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"flex-start",color:"gray",textTransform:"uppercase",width:e.spacing(14),gridGap:e.spacing(1)},statusBoxCached:{borderColor:e.palette.success.light,color:e.palette.success.light},statusBoxBuilding:{borderColor:e.palette.primary.main,color:e.palette.primary.main},statusBoxFailed:{borderColor:e.palette.error.main,color:e.palette.error.main}})))();var k=a(70579);const E=e=>{let{cacheStatus:t}=e;const{t:a}=(0,s.B)("queries"),l=T();return(0,k.jsx)(c.A,{title:(()=>{switch(t){case w.O.CACHED:return a("cache.cache");case w.O.BUILDING:return a("cache.building-cache");case w.O.FAILED:return a("cache.failed-building-cache");default:return a("cache.no-cache")}})(),children:(0,k.jsxs)(A.A,{className:(0,j.A)(l.statusBox,{[l.statusBoxCached]:t===w.O.CACHED,[l.statusBoxBuilding]:t===w.O.BUILDING,[l.statusBoxFailed]:t===w.O.FAILED}),children:[(()=>{switch(t){case w.O.CACHED:return(0,k.jsx)(C.A,{});case w.O.BUILDING:return(0,k.jsx)(y.A,{});default:return(0,k.jsx)(S.A,{})}})()," ",t||a("cache.no-cache-status-text")]})})};var N=a(41104),I=a(52437),P=a(95004),M=a(5011),B=a(97111),O=a(33206),L=a(6011),_=a(34294);const U=()=>(0,D.A)((e=>({...e.common,root:{flexGrow:1},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})))(),z=e=>{let{onUpdateProjectAction:t,queries:a,selectedProject:l,queryCacheStatusData:i,loadQueries:o,deleteQuery:j,setSelectedQuery:A,buildQueryCache:y,loadQueryCacheStatus:C,clearQueryCacheStatus:S}=e;const{t:D}=(0,s.B)("queries"),T=U(),z=(0,d.useHistory)(),[F,W]=(0,n.useState)([]),[V,R]=(0,n.useState)(!1),[$,H]=(0,n.useState)(!1),[q,G]=(0,n.useState)(""),[Q,K]=(0,n.useState)("success"),[Z,Y]=(0,n.useState)(!1),[X,J]=(0,n.useState)([]),[ee,te]=(0,n.useState)(""),[ae,le]=(0,n.useState)(null),[ie,ne]=(0,n.useState)(""),oe=(0,n.useMemo)((()=>null!==X&&void 0!==X&&X.length?D("table.dialog-delete-multi-text",{count:null===X||void 0===X?void 0:X.length}):D("table.dialog-delete-text",{selectedQueryName:ae})),[ae,X]),re=(0,n.useMemo)((()=>r().isEmpty(X)),[X]),se=(0,n.useMemo)((()=>r().union(X,[ee]).filter((e=>e))),[X,ee]);(0,n.useEffect)((()=>{a.data&&a.data.length>0&&a.data.forEach((e=>{e.columnList=e.columns.join(" "),e.query_segments=null==(null===e||void 0===e?void 0:e.summary_statistics)?"":e.summary_statistics.total_segments})),ie||(a.data=N.A.sortObjects(a.data||[{}],"last_modified_at",!1,"dsc")),W(a)}),[a]),(0,O.$$)((async()=>{await C(l,ie)}),ie?5e3:null),(0,n.useEffect)((()=>{void 0!==i.build_status&&i.build_status!==w.O.BUILDING&&i.build_status!==w.O.NOT_BUILT&&(ne(""),o(l))}),[i]),(0,n.useEffect)((()=>(o(l),()=>S())),[]);const de=(e,t)=>{A(t),z.push((0,d.generatePath)(B.bw.MAIN.DATA_EXPLORER.child.QUERY_DETAILS_SCREEN.path,{projectUUID:l,queryUUID:t}))},ce=(e,t)=>{"clickaway"!==t&&H(!1)},ue=(e,t,a)=>{le(a),te(t),R(!0)},me=(e,t)=>{G(t),K(e),H(!0)},pe=e=>N.A.convertToLocalDateTime(e),xe=[{title:"Name",field:"name",primary:!0,sortable:!0,type:I.$.Text,filterable:!0,render:(e,t)=>(0,k.jsx)(M.H,{color:"primary",onClick:e=>de(0,t.uuid),tooltipTitle:"Open ".concat(e),children:e})},{title:"Columns",field:"columnList",sortable:!0,type:I.$.Text,filterable:!0},{title:"Filter",field:"metadata_filter",sortable:!0,type:I.$.Text,filterable:!0},{title:"Segments",field:"query_segments",sortable:!0,type:I.$.Text,filterable:!0},{title:"Last Modified",field:"last_modified",sortable:!0,type:I.$.DateTime,filterable:!0,render:pe},{title:"Created Date",field:"created_at",sortable:!0,type:I.$.DateTime,filterable:!0,render:e=>e.includes("z")&&e.includes("Z")?pe(e):pe("".concat(e,"z"))},{title:"UUID",field:"uuid",sortable:!0,type:I.$.Text,filterable:!0},{title:"Status",field:"task_status",sortable:!0,type:I.$.Text,filterable:!0,render:(e,t)=>(0,k.jsx)(E,{cacheStatus:t.task_status})},{title:"Rebuild",field:"uuid",render:(e,t)=>(0,k.jsx)(c.A,{title:"Build Cache",children:(0,k.jsx)(u.A,{variant:"contained",color:"primary",size:"small",onClick:t=>(async(e,t)=>{try{await y(l,t),ne(t)}catch(a){me("error",a.message)}})(0,e),disabled:Boolean(ie),children:(0,k.jsx)(g.A,{className:ie&&e===ie})})})},{title:"Manage",field:"uuid",render:e=>(0,k.jsx)(c.A,{title:"Manage Query",children:(0,k.jsx)(u.A,{variant:"contained",color:"primary",size:"small",onClick:t=>de(0,e),children:(0,k.jsx)(h.A,{})})})},{title:"Delete",field:"uuid",render:(e,t)=>(0,k.jsx)(c.A,{title:"Delete Query",children:(0,k.jsx)(u.A,{variant:"contained",color:"primary",size:"small",disabled:!re,onClick:a=>ue(0,e,t.name),children:(0,k.jsx)(f.A,{})})})}],he={rowsPerPage:25,rowsPerPageOptions:[5,10,25,50,100,"All"],showPagination:!0,applyFilters:!0,isShowSelection:!0,selectionField:"uuid",onSelectInTable:e=>{J(e)},noContentText:"No Queries",excludePrimaryFromDetails:!0,isDarkHeader:!0};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(L.f,{title:D("table.title"),onRefresh:()=>o(l),ActionComponent:(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(_.U,{variant:"outlined",color:"primary",onClick:()=>ue(),tooltip:D("Delete Query"),text:D("Delete"),icon:(0,k.jsx)(f.A,{}),disabled:re,className:T.mr1})})}),(0,k.jsx)(v.A,{tableId:"queriesTable",tableColumns:xe,tableData:F,tableOptions:he}),(0,k.jsx)(P.Z,{isOpen:V,title:D("table.dialog-delete-title"),text:oe,onConfirm:async()=>{const e=[];Y(!0),R(!1);for(const t of se){const a=await j(l,t);"error"===a.status?(me("error",a.details),Y(!1)):e.push(t)}e.includes(ee)&&te(""),r().isEmpty(X)||J(X.filter((t=>!e.includes(t)))),Y(!1),o(l),t(),r().isEmpty(e)||me("success",D("table.msg-success-delete",{count:null===e||void 0===e?void 0:e.length}))},onCancel:()=>{R(!1)},cancelText:D("dialog-confirm-delete.cancel"),confirmText:D("dialog-confirm-delete.delete")}),(0,k.jsx)(m.A,{anchorOrigin:{vertical:"top",horizontal:"right"},open:$,autoHideDuration:2e3,onClose:ce,children:(0,k.jsx)(b.A,{onClose:ce,variant:Q,message:q})}),(0,k.jsx)(p.A,{className:T.backdrop,open:Z,children:(0,k.jsx)(x.A,{size:100})})]})};const F={loadQueries:i.P6,deleteQuery:i.yN,setSelectedQuery:i.iZ,buildQueryCache:i.$1,loadQueryCacheStatus:i.lw,clearQueryCacheStatus:i.QC},W=(0,l.Ng)((function(e){return{queries:e.queries.queryList,selectedProject:e.projects.selectedProject.uuid,queryCacheStatusData:e.queries.queryCacheStatus.data||{}}}),F)(z)},29765:(e,t,a)=>{a.d(t,{A:()=>r});a(65043);var l=a(85865),i=a(63336),n=a(96446),o=a(70579);const r=e=>{const{children:t,value:a,index:r,p:s=2,mt:d=2,...c}=e;return(0,o.jsx)(l.A,{component:"div",role:"tabpanel",hidden:a!==r,id:"full-width-tabpanel-".concat(r),"aria-labelledby":"full-width-tab-".concat(r),...c,children:a===r&&(0,o.jsx)(i.A,{elevation:0,children:(0,o.jsx)(n.A,{p:s,mt:d,children:t})})})}},5011:(e,t,a)=>{a.d(t,{H:()=>s});a(65043);var l=a(77739),i=a(88446),n=a(7478);const o=()=>(0,n.A)((e=>({...e.common,baseLink:{color:e.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"none",cursor:"pointer",color:e.palette.primary.dark}}})))();var r=a(70579);const s=e=>{let{children:t,tooltipTitle:a,...n}=e;const s=o();return(0,r.jsx)(l.A,{title:a,children:(0,r.jsx)(i.A,{...n,className:s.baseLink,children:t})})}},48830:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Ge});var l=a(20697),i=a(20433),n=a(61703),o=a(58189),r=a(12826),s=a(16932),d=a(97508),c=a(65043),u=a(7426),m=a(91688),p=a(48625),x=a(75342),h=a(11906),f=a(96446),g=a(68903),v=a(63336),b=a(20991),j=a(24056),A=a(39336),y=a(33206),C=a(97111),S=a(82604),w=a.n(S),D=a(41104),T=a(77739),k=a(85865),E=a(12110),N=a(36591),I=a(17392),P=a(1130),M=a(83462),B=a(26600),O=a(35316),L=a(98533),_=a(29347),U=a(94327),z=a(95540),F=a(17035),W=a(93786),V=a(19599),R=a(42090),$=a(71043),H=a(78355),q=a(53456),G=a(82462),Q=a(19810),K=a(94329),Z=a(44208),Y=a(26480),X=a(85502),J=a(61199),ee=a.n(J),te=a(30400),ae=a(7478);const le=()=>(0,ae.A)((e=>({root:{flexGrow:1},mainGrid:{marging:0,padding:e.spacing(2)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},card:{margin:"auto",transition:"0.3s",boxShadow:"0 8px 40px -12px rgba(0,0,0,0.3)","&:hover":{boxShadow:"0 16px 70px -12.125px rgba(0,0,0,0.3)"}},media:{paddingTop:"56.25%"},content:{textAlign:"left",padding:7,minHeight:150},heading:{fontWeight:"bold"},subheading:{lineHeight:1.8},tabs:{"&:last-child":{position:"absolute",right:"0"}},boxBig:{minWidth:150,minHeight:60,paddingRight:10,paddingTop:3,margin:2},fieldTitleBig:{fontSize:20,color:e.palette.primary.main},fieldValueBig:{fontSize:25,lineHeight:1,paddingTop:15},dashboardIconBig:{fontSize:20,verticalAlign:"middle"},boxNormal:{minWidth:180,minHeight:60,paddingRight:20,margin:2},fieldTitleNormal:{fontSize:13,fontWeight:"bold",color:e.palette.primary.main},fieldValueNormal:{fontSize:20,fontWeight:"bold",float:"center"},dashboardIconNormal:{minWidth:50,fontSize:50,verticalAlign:"middle"},boxSmall:{minWidth:200,minHeight:40,paddingRight:20,margin:2},fieldTitleSmall:{fontSize:20,color:e.palette.primary.main},fieldValueSmall:{fontSize:17,lineHeight:1,float:"center"},dashboardIconSmall:{minWidth:25,fontSize:25,verticalAlign:"middle"},dataDescription:{width:"100%"},fieldContent:{margin:"auto",width:"60%",padding:10},dataOuterDiv:{display:"table",overflow:"hidden",height:"100%"},dataInnerDiv:{display:"table-cell",verticalAlign:"middle"},imageSelectorWrapper:{width:400},imageSelectionWrapper:{width:400,paddingTop:20},SelectedImageStyle:{width:385}})))();var ie=a(70579);const ne=e=>{let{setProjectImage:t}=e;const a=le(),[l,i]=c.useState([]);return(0,ie.jsx)(ee(),{value:l,onChange:e=>{i(e),e&&e.length>0&&t(e[0])},dataURLKey:"data_url",children:e=>{let{imageList:t,onImageUpload:l}=e;return(0,ie.jsxs)("span",{children:[(0,ie.jsx)("div",{className:a.imageSelectorWrapper,children:(0,ie.jsx)("span",{children:(0,ie.jsx)(T.A,{title:"Select Image",children:(0,ie.jsx)(h.A,{onClick:l,startIcon:(0,ie.jsx)(te.A,{}),color:"primary",variant:"contained",children:"Select Image"})})})}),(0,ie.jsx)("div",{className:a.imageSelectionWrapper,children:t.map(((e,t)=>(0,ie.jsx)("div",{className:"image-item",children:(0,ie.jsx)("img",{src:e.data_url,alt:"",className:a.SelectedImageStyle})},t)))})]})}})},oe=(e,t,a,l,i,n,o)=>{return(0,ie.jsx)(f.A,{boxShadow:2,p:1,className:e.box,children:(0,ie.jsx)(g.Ay,{container:!0,direction:"column",spacing:0,children:(0,ie.jsx)(g.Ay,{container:!0,direction:"row",spacing:0,children:(0,ie.jsxs)(g.Ay,{item:!0,xs:12,children:[(0,ie.jsxs)(k.A,{className:e.fieldTitle,align:"left",gutterBottom:!0,children:[(r=i,s=e,d=n||t,(0,ie.jsx)(T.A,{title:d,children:(0,ie.jsx)(Z.A,{className:s.dashboardIcon,color:"primary",children:r})}))," ".concat(t)]}),(0,ie.jsx)(k.A,{className:e.fieldValue,align:o,children:" ".concat(a)})]})})})});var r,s,d},re=e=>{let{selectedProject:t,metadata:a,labelsData:l,sensorData:i,updateProject:n,uploadImage:o}=e;const r=le(),s={fieldTypeBig:{box:r.boxBig,fieldValue:r.fieldValueBig,dashboardIcon:r.dashboardIconBig,fieldTitle:r.fieldTitleBig,fieldContent:r.fieldContent,dataOuterDiv:r.dataOuterDiv,dataInnerDiv:r.dataInnerDiv,colOne:7,name:"Big"},fieldTypeNormal:{box:r.boxNormal,fieldValue:r.fieldValueBig,dashboardIcon:r.dashboardIconBig,fieldTitle:r.fieldTitleBig,fieldContent:r.fieldContent,dataOuterDiv:r.dataOuterDiv,dataInnerDiv:r.dataInnerDiv,colOne:3,name:"Normal"},fieldTypeSmall:{box:r.boxSmall,fieldValue:r.fieldValueSmall,dashboardIcon:r.dashboardIconBig,fieldTitle:r.fieldTitleSmall,fieldContent:r.fieldContent,dataOuterDiv:r.dataOuterDiv,dataInnerDiv:r.dataInnerDiv,colOne:6,name:"Small"}},[d,u]=c.useState(null),[m,p]=c.useState(null),[x,v]=c.useState(null),[b,j]=c.useState(null),[y,C]=c.useState(null),[S,Z]=c.useState(!1),[J,ee]=c.useState(!1),[te,ae]=c.useState(null),[re,se]=c.useState(null);(0,c.useEffect)((()=>{if(a&&!a.isFetching){p(a.data);const e=a.data.find((e=>"Device"===e.name));void 0!==e&&v(e.label_values)}}),[a]),(0,c.useEffect)((()=>{l&&!l.isFetching&&C(l.data)}),[l]),(0,c.useEffect)((()=>{i&&!i.isFetching&&j(i.data)}),[i]),(0,c.useEffect)((()=>{u(t),se(t.description),Z(!1)}),[t]);const de=e=>{ee(!1)};return(0,ie.jsxs)(g.Ay,{className:r.mainGrid,xs:12,item:!0,container:!0,direction:"row",alignItems:"stretch",spacing:1,children:[(0,ie.jsx)(g.Ay,{item:!0,xs:12,lg:4,children:(0,ie.jsxs)(E.A,{className:r.card,children:[(0,ie.jsx)(N.A,{component:"a",alt:"Contemplative Reptile",className:r.media,image:d?t.img?t.img.data_url:"".concat("http://localhost:8000/","project/").concat(d.uuid,"/image/"):null}),(0,ie.jsx)(g.Ay,{container:!0,direction:"row",spacing:0,justifyContent:"flex-end",children:(0,ie.jsx)(k.A,{className:"MuiTypography--heading",variant:"h5",gutterBottom:!0,children:(0,ie.jsx)(T.A,{title:"Change Image",children:(0,ie.jsx)(I.A,{onClick:e=>{ee(!0)},color:"primary",size:"large",children:(0,ie.jsx)(U.A,{})})})})})]})}),(0,ie.jsxs)(g.Ay,{lg:8,xs:12,item:!0,container:!0,direction:"row",alignItems:"stretch",spacing:0,children:[(0,ie.jsx)(g.Ay,{item:!0,xs:!0,children:oe(s.fieldTypeBig,"Captures",[d?d.files:""],0,(0,ie.jsx)(H.A,{fontSize:"inherit"}),"Total number of Capture Files.","right")}),(0,ie.jsx)(g.Ay,{item:!0,xs:!0,children:oe(s.fieldTypeBig,"Queries",[d?d.queries:""],0,(0,ie.jsx)(F.A,{fontSize:"inherit"}),"Total number Of Queries.","right")}),(0,ie.jsx)(g.Ay,{item:!0,xs:!0,children:oe(s.fieldTypeBig,"Pipelines",[d?d.pipelines:""],0,(0,ie.jsx)(V.A,{fontSize:"inherit"}),"Total number Of Pipelines.","right")}),(0,ie.jsx)(g.Ay,{item:!0,xs:!0,children:oe(s.fieldTypeBig,"Models",[d?d.models:""],0,(0,ie.jsx)($.A,{fontSize:"inherit"}),"Total number Of Knowledge Packs.","right")}),(0,ie.jsx)(g.Ay,{item:!0,xs:!0,children:oe(s.fieldTypeBig,"Segments",[d?d.segments:""],0,(0,ie.jsx)(G.A,{fontSize:"inherit"}),"Total number Of Segments.","right")}),(0,ie.jsx)(g.Ay,{item:!0,xs:!0,children:oe(s.fieldTypeBig,"Size(MB)",[d?d.size_mb:""],0,(0,ie.jsx)(K.A,{fontSize:"inherit"}),"Total size of all Capture Files.","right")}),(0,ie.jsx)(g.Ay,{item:!0,xs:12,children:oe(s.fieldTypeSmall,"Created Date",[d?D.A.convertToLocalDateTime(d.created_at):""],0,(0,ie.jsx)(R.A,{fontSize:"inherit"}),"Project created date.","left")}),(0,ie.jsx)(g.Ay,{item:!0,xs:12,children:oe(s.fieldTypeSmall,"UUID",[d?d.uuid:""],0,(0,ie.jsx)(R.A,{fontSize:"inherit"}),"Project unique identifier.","left")}),(0,ie.jsx)(g.Ay,{item:!0,xs:12,children:oe(s.fieldTypeSmall,"Sensors",[b?b.join(", "):""],0,(0,ie.jsx)(W.A,{fontSize:"inherit"}),"Sensors captured by the device.","left")}),(0,ie.jsx)(g.Ay,{item:!0,xs:12,children:oe(s.fieldTypeSmall,"Labels",y?y.map((e=>"".concat(e.name," : ").concat(e.label_values.map((e=>e.value)).join(", ")))):["N/A"],0,(0,ie.jsx)(q.A,{fontSize:"inherit"}),"Labels for the dataset","left")}),(0,ie.jsx)(g.Ay,{item:!0,xs:12,children:oe(s.fieldTypeSmall,"Metadata",[m?m.map((e=>e.name)).join(", "):""],0,(0,ie.jsx)(Q.A,{fontSize:"inherit"}),"Metadata associated with this project.","left")})]}),(0,ie.jsxs)(g.Ay,{item:!0,xs:12,children:[(0,ie.jsx)(f.A,{m:4,children:(0,ie.jsx)(A.A,{orientation:"horizontal"})}),(0,ie.jsxs)(g.Ay,{container:!0,direction:"row",spacing:0,justifyContent:"space-between",children:[(0,ie.jsxs)(k.A,{className:"MuiTypography--heading",variant:"h5",gutterBottom:!0,children:[(0,ie.jsxs)("b",{children:["Project Description: ",t.name," "]})," "]}),(0,ie.jsx)(k.A,{className:"MuiTypography--heading",variant:"h4",gutterBottom:!0,children:S?(0,ie.jsx)("span",{children:(0,ie.jsx)(T.A,{title:"Save Data Description",children:(0,ie.jsx)(I.A,{color:"primary",onClick:e=>{Z(!1),t.description!==re&&(t.description=re,n(t))},size:"large",children:(0,ie.jsx)(K.A,{})})})}):(0,ie.jsx)(T.A,{title:"Edit Data Description (Markdown)",children:(0,ie.jsx)(I.A,{color:"primary",onClick:e=>{Z(!0)},size:"large",children:(0,ie.jsx)(z.A,{})})})})]})]}),S?(0,ie.jsx)(P.h,{className:r.dataDescription,id:"dataDescription",variant:"outlined",value:re,onChange:e=>se(e.target.value),minRows:5}):(0,ie.jsx)(g.Ay,{children:(0,ie.jsx)(w(),{children:re})}),(0,ie.jsxs)(M.A,{disableEscapeKeyDown:!0,open:J,onClose:de,id:"renameKnowledgePack","aria-labelledby":"form-dialog-title",children:[(0,ie.jsx)(B.A,{id:"form-dialog-title",children:"Replace Project Image"}),(0,ie.jsx)(O.A,{children:(0,ie.jsxs)(L.A,{id:"form-dialog-content",children:["Please select an Image.",(0,ie.jsx)(ne,{setProjectImage:e=>{ae(e)}})]})}),(0,ie.jsxs)(_.A,{id:"renameKnowledgepackActions",children:[(0,ie.jsx)(h.A,{onClick:de,startIcon:(0,ie.jsx)(X.A,{}),color:"primary",variant:"outlined",children:"Cancel"}),(0,ie.jsx)(h.A,{onClick:e=>{t.img=te,o(te.data_url,te.file.name,d.uuid,(()=>{ee(!1)}))},startIcon:(0,ie.jsx)(Y.A,{}),color:"primary",variant:"outlined",children:"Upload"})]})]})]})},se={updateProject:i.vr,uploadImage:i.V6,loadProjects:i.RT},de=(0,d.Ng)((e=>({selectedProject:e.projects.selectedProject,metadata:e.metadata,labelsData:e.labels,sensorData:e.sources})),se)(re);var ce=a(29299),ue=a(28537),me=a(83746),pe=a(29765),xe=a(1577),he=a(53536),fe=a.n(he),ge=a(63471),ve=a(5259),be=a(14381),je=a(95004),Ae=a(20210),ye=a(52437),Ce=a(6011);const Se=e=>{let{projectUUID:t,labelValues:a,labels:l,defaultLabel:i,createLabel:n,updateLabel:o,deleteLabel:r}=e;const{t:s}=(0,u.B)("components"),[d,m]=(0,c.useState)(!1),[p,x]=(0,c.useState)(""),[f,g]=(0,c.useState)({}),[v,b]=(0,c.useState)(""),[j,A]=(0,c.useState)(""),y=(0,c.useMemo)((()=>(null===l||void 0===l?void 0:l.length)>1||!1),[l]),C=(0,c.useMemo)((()=>fe().isEmpty(l)?[]:l.map((e=>({name:e.name,value:e.uuid})))),[l]),S=(0,c.useCallback)((e=>fe().isEmpty(a.data)?[]:a.data.filter((t=>t.labelUUID===e)).map((e=>fe().toLower(e.name)))),[a]),w=(0,c.useMemo)((()=>fe().isEmpty(a.data)?{}:a.data.find((e=>e.uuid===p))),[p]),k=()=>{g({})},E=()=>{m(!1)},N=e=>e?D.A.convertToLocalDateTime(e):"",P=e=>{x(e)},M=()=>{P("")};(0,c.useEffect)((()=>{A("")}),[f,d]),(0,c.useEffect)((()=>{b(null===i||void 0===i?void 0:i.uuid)}),[]),(0,c.useEffect)((()=>()=>b("")),[]);const B=[{title:s("label-values-table.header-name"),field:"name",primary:!0,sortable:!0,type:ye.$.Text,filterable:!0,render:(e,t)=>(0,ie.jsx)(be.A,{name:(null===t||void 0===t?void 0:t.name)||"",color:(null===t||void 0===t?void 0:t.color)||""})},y&&{title:s("label-values-table.header-label-group-name"),field:"label",primary:!0,sortable:!0,type:ye.$.Text,filterable:!0},{title:s("label-values-table.header-created"),field:"created",sortable:!0,type:ye.$.DateTime,filterable:!0,render:N},{title:s("label-values-table.header-updated"),field:"updated",sortable:!0,type:ye.$.DateTime,filterable:!0,render:N},{title:s("label-values-table.header-edit"),field:"uuid",render:e=>(0,ie.jsx)(T.A,{title:s("label-values-table.tooltip-edit-label"),children:(0,ie.jsx)(I.A,{variant:"contained",color:"primary",size:"small",onClick:()=>(e=>{const t=a.data.find((t=>t.uuid===e));g(t)})(e),children:(0,ie.jsx)(z.A,{})})})},{title:s("label-values-table.header-delete"),field:"uuid",render:e=>(0,ie.jsx)(T.A,{title:s("label-values-table.tooltip-delete-label"),children:(0,ie.jsx)(I.A,{variant:"contained",color:"primary",size:"small",onClick:()=>P(e),children:(0,ie.jsx)(ge.A,{})})})}],O=s("label-values-table.title"),L={rowsPerPage:20,showPagination:!1,noContentText:s("label-values-table.empty-content"),excludePrimaryFromDetails:!0,applyFilters:!0,isDarkHeader:!0};return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(Ce.f,{title:O,ActionComponent:(0,ie.jsx)(ie.Fragment,{children:(0,ie.jsx)(h.A,{variant:"outlined",color:"primary",onClick:()=>{m(!0)},children:s("label-values-table.panel-btn-add")})})}),(0,ie.jsx)(ve.A,{tableData:a,tableColumns:B,tableOptions:L}),fe().isEmpty(f)?null:(0,ie.jsx)(Ae.$,{isOpen:!fe().isEmpty(f),title:s("label-values-table.dialog-edit-title"),getLabelNamesToCheck:S,labelName:f.name,defaultLabelColor:f.color,labelGroupOptions:C,defaultLabelGroup:f.labelUUID,onClose:k,onSubmit:async(e,a,l)=>{try{await o(t,l||v,f.uuid,{value:e,color:a}),k()}catch(i){A(i.message)}},validationError:j}),d?(0,ie.jsx)(Ae.$,{isOpen:d,title:s("label-values-table.dialog-create-title"),getLabelNamesToCheck:S,labelGroupOptions:C,defaultLabelGroup:v,onClose:E,onSubmit:async(e,a,l)=>{try{await n(t,l||v,{value:e,color:a}),l&&b(l),E()}catch(i){A(i.message)}},validationError:j}):null,p?(0,ie.jsx)(je.Z,{isOpen:Boolean(p),title:s("label-values-table.alert-deleting-title"),text:s("label-values-table.alert-deleting-text",{labelName:null===w||void 0===w?void 0:w.name}),onConfirm:()=>{r(t,null===w||void 0===w?void 0:w.labelUUID,null===w||void 0===w?void 0:w.uuid),M()},onCancel:M,cancelText:s("dialog-confirm-delete.cancel"),confirmText:s("dialog-confirm-delete.delete")}):null]})};var we=a(73456),De=a(67254),Te=a(67784),ke=a(74605),Ee=a(36694),Ne=a(4172);const Ie=e=>{let{isOpen:t,defaultName:a,defaultIsDropDown:l,title:i="",description:n="",metadataNames:o=[],validationError:r,onClose:s,onSubmit:d}=e;const{t:m}=(0,u.B)("components"),p=(0,ae.A)((e=>({formWrap:{width:"100%",display:"flex",flexDirection:"column",marginBottom:e.spacing(3)}})))(),[x,g]=(0,c.useState)(),[v,b]=(0,c.useState)(!0),[j,A]=(0,c.useState)(),y=e=>{b(e)},C=()=>{s()};return(0,c.useEffect)((()=>()=>A("")),[]),(0,c.useEffect)((()=>{fe().isUndefined(l)||y(l)}),[l]),(0,c.useEffect)((()=>()=>g("")),[]),(0,ie.jsx)(Ne.A,{title:i,disableEscapeKeyDown:!0,isOpen:t,onClose:C,"aria-labelledby":i,actionsComponent:(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(h.A,{onClick:C,color:"primary",variant:"outlined",fullWidth:!0,children:m("dialog-form-metadata.btn-action-cancel")}),(0,ie.jsx)(h.A,{onClick:()=>{var e;e=x,(fe().isEmpty(o.filter((e=>e!==a)).find((t=>fe().toLower(fe().trim(e))===fe().toLower(fe().trim(t)))))||(A(m("dialog-form-metadata-values.validation-error-duplicate",{name:e})),0))&&d(x||a,v)},color:"primary",variant:"contained",fullWidth:!0,children:m("dialog-form-metadata.btn-action-save")})]}),children:(0,ie.jsxs)(f.A,{children:[n||r?(0,ie.jsx)(f.A,{mt:1,mb:2,children:r?(0,ie.jsx)(De.A,{severity:"error",children:r}):(0,ie.jsx)(De.A,{severity:"info",children:n})}):null,(0,ie.jsx)(f.A,{className:p.formWrap,children:(0,ie.jsx)(Te.A,{error:Boolean(j),helperText:j,autoFocus:!0,margin:"dense",id:"metadataName",label:m("dialog-form-metadata.label-name"),required:!0,defaultValue:a,onChange:e=>{var t;A(""),g(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},fullWidth:!0})}),(0,ie.jsxs)(f.A,{className:p.formWrap,children:[(0,ie.jsx)(k.A,{gutterBottom:!0,children:m("dialog-form-metadata.label-type")}),(0,ie.jsxs)(f.A,{children:[(0,ie.jsx)(ke.A,{value:"top",control:(0,ie.jsx)(Ee.A,{id:"isDropdownRaio",color:"primary",checked:v,onChange:e=>y(!0)}),label:m("dialog-form-metadata.label-type-dropdown"),labelPlacement:"start"}),(0,ie.jsx)(ke.A,{value:"top",control:(0,ie.jsx)(Ee.A,{id:"isTextRaio",color:"primary",checked:!v,onChange:e=>y(!1)}),label:m("dialog-form-metadata.label-type-text"),labelPlacement:"start"})]}),(0,ie.jsx)(k.A,{variant:"caption",children:m(v?"dialog-form-metadata.type-dropdown-help":"dialog-form-metadata.type-text-help")})]})]})})};Ie.defaultProps={onSubmit:()=>{},onClose:()=>{}};const Pe=Ie;var Me=a(11227),Be=a(22070),Oe=a(26240),Le=a(81131),_e=a(46342);const Ue=e=>{let{isOpen:t,title:a,description:l,defaultValues:i=[],onClose:n,onLoadMetadata:o,onCreate:r,onUpdate:s,onDelete:d}=e;const{t:m}=(0,u.B)("components"),p=(0,ae.A)((e=>({formWrapper:{width:"100%",display:"flex",flexDirection:"column"},formWrap:{width:"100%",display:"flex",flexDirection:"column",marginBottom:e.spacing(2)},deleteBtn:{height:e.spacing(6),width:e.spacing(6),justifyContent:"flex-start",alignItems:"flex-start"},dictItemWrapper:{width:"100%",display:"inline-grid",gridTemplateColumns:"auto 2rem"}})))(),x=(0,Oe.A)(),[g,v]=(0,c.useState)({}),[b,j]=(0,c.useState)([]),[A,y]=(0,c.useState)(!1),[C,S]=(0,c.useState)(!1),[w,D]=(0,c.useState)([]),[k,E]=(0,c.useState)([]),[N,P]=(0,c.useState)(""),M=(0,c.useMemo)((()=>b.filter((e=>!w.includes(e.name)))),[b,w]),B=(0,c.useMemo)((()=>!fe().isEmpty(g)||fe().isEqual(i,M)),[g,M]),O=(0,c.useMemo)((()=>M.map((e=>e.value))),[M]),L=(0,c.useMemo)((()=>i.map((e=>e.name))),[i]),_=(0,c.useMemo)((()=>{var e,t;const a=(null===(e=b.find((e=>e.name===N)))||void 0===e?void 0:e.value)||"",l=(null===(t=i.find((e=>e.name===N)))||void 0===t?void 0:t.value)||"";return a!==l?"".concat(a," (").concat(l,")"):a||""}),[N,b,i]),U=(0,c.useMemo)((()=>M.filter((e=>e.isUpdated&&L.includes(e.name)))),[L,b,M]),z=(0,c.useMemo)((()=>M.filter((e=>k.includes(e.name)))||[]),[M,k]),F=(e,t)=>{v({...g,[e]:t})},W=()=>{v({})},V=()=>{y(!1),j([])},R=()=>{W(),V(),n()},$=()=>{fe().isEmpty(z)&&fe().isEmpty(w)&&fe().isEmpty(U)?R():S(!0)},H=(e,t,a)=>{W(),((e,t,a)=>{!(O.filter(((e,l)=>fe().toLower(fe().trim(e))===fe().toLower(fe().trim(t))&&l!==a)).length>0)||F(e,m("dialog-form-metadata-values.validation-error-duplicate"))})(e,t,a),j(b.map((a=>a.name===e?{...a,value:t,isUpdated:!0}:a)))},q=()=>{const e=fe().uniqueId();j([...b,{name:e,value:""}]),E([...k,e])};return(0,c.useEffect)((()=>()=>W()),[]),(0,c.useEffect)((()=>()=>V()),[]),(0,c.useEffect)((()=>{fe().isEmpty(i)?q():j(i)}),[]),(0,ie.jsxs)(Ne.A,{title:a,disableEscapeKeyDown:!0,isOpen:t,onClose:$,"aria-labelledby":a,actionsComponent:(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(h.A,{onClick:$,color:"primary",variant:"outlined",fullWidth:!0,children:m("dialog-form-metadata-values.btn-action-cancel")}),(0,ie.jsx)(h.A,{onClick:async()=>{const e={};let t=!0;b.forEach((e=>{var a,l;a=e.name,l=e.value,t=!!l||(F(a,m("dialog-form-metadata-values.validation-error-empty")),!1)})),t&&(y(!0),fe().isEmpty(w)||await Promise.all(w.filter((e=>L.includes(e))).map((async a=>{try{await d(a)}catch(l){t=!1,D(b.filter((e=>e!==a))),e[a]=l.message}}))),fe().isEmpty(U)||await Promise.all(U.filter((e=>!i.includes(e.value))).map((async a=>{try{await s(a.name,a.value)}catch(l){t=!1,e[a.name]=l.message}}))),fe().isEmpty(z)||await Promise.all(z.map((async a=>{try{await r(a.value),E(z.filter((e=>e!==a.name)))}catch(l){t=!1,e[a.name]=l.message}}))),v(e),y(!1),o(),t&&(W(),V(),n()))},color:"primary",variant:"contained",disabled:B,fullWidth:!0,children:m("dialog-form-metadata-values.btn-action-save")})]}),children:[(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(f.A,{mt:1,mb:2,children:(0,ie.jsx)(De.A,{severity:"info",children:l})}),A?(0,ie.jsx)(Le._S,{isOpen:!0,type:"TailSpin"}):(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(f.A,{className:p.formWrapper,children:fe().isEmpty(b)?null:M.map(((e,t)=>(0,ie.jsxs)(f.A,{className:"".concat(p.formWrap," ").concat(p.dictItemWrapper),children:[(0,ie.jsx)(_e.A,{id:e.name,name:e.name,error:Boolean(g[e.name]),helperText:g[e.name],isUpdateWithDefault:!1,onChange:(e,a)=>H(e,a,t),defaultValue:null===e||void 0===e?void 0:e.value,variant:"outlined",margin:"dense",placeholder:m("dialog-form-metadata-values.placeholder-value"),disabled:!fe().isEmpty(g)&&!g[e.name],size:"small",required:!0,autoFocus:!0}),(0,ie.jsx)(f.A,{display:"flex",alignItems:"flex-end",flex:1,children:(0,ie.jsx)(T.A,{title:"",placement:"top",children:(0,ie.jsx)(I.A,{className:p.deleteBtn,onClick:t=>{return a=e.name,W(),void(L.includes(a)?P(a):(E(z.filter((e=>e!==a))),D([...w,a])));var a},size:"large",children:(0,ie.jsx)(Be.A,{style:{color:x.colorDeleteIcons}})})})})]},e.name)))}),(0,ie.jsx)(f.A,{className:p.formWrap,children:(0,ie.jsx)(h.A,{color:"primary",variant:"outlined",size:"small",startIcon:(0,ie.jsx)(Me.A,{}),onClick:q,children:m("dialog-form-metadata-values.btn-add")})})]})]}),N?(0,ie.jsx)(je.Z,{isOpen:Boolean(N),title:m("dialog-form-metadata-values.dialog-delete-alert-title"),text:m("dialog-form-metadata-values.dialog-delete-alert-description",{name:_}),onConfirm:()=>{P(""),D([...w,N])},onCancel:()=>P(""),cancelText:m("dialog-confirm-delete.cancel"),confirmText:m("dialog-confirm-delete.delete")}):null,C?(0,ie.jsx)(je.Z,{isOpen:C,title:m("dialog-form-metadata-values.dialog-alert-unsaved-title"),text:m("dialog-form-metadata-values.dialog-alert-unsaved-description",{name:_}),onCancel:()=>{S(!1)},onConfirm:R,cancelText:m("dialog-confirm-close.cancel"),confirmText:m("dialog-confirm-close.confirm")}):null]})};Ue.defaultProps={onUpdate:()=>{},onCreate:()=>{},onDelete:()=>{},onClose:()=>{},defaultValues:[]};const ze=Ue,Fe=e=>{let{projectUUID:t,metadata:a,loadMetadata:l,createMetadata:i,updateMetadata:n,deleteMetadata:o,createMetadataValue:r,updateMetadataValue:s,deleteMetadataValue:d}=e;const{t:m}=(0,u.B)("components"),[p,x]=(0,c.useState)(!1),[f,g]=(0,c.useState)(""),[v,b]=(0,c.useState)(""),[j,A]=(0,c.useState)(""),[y,C]=(0,c.useState)(""),S=(0,c.useMemo)((()=>!fe().isEmpty(null===a||void 0===a?void 0:a.data)&&fe().isArray(null===a||void 0===a?void 0:a.data)?a.data.map((e=>e.name)):[]),[a]),w=(0,c.useMemo)((()=>{if(!fe().isEmpty(null===a||void 0===a?void 0:a.data)&&fe().isArray(null===a||void 0===a?void 0:a.data)){const e=(null===a||void 0===a?void 0:a.data.find((e=>e.uuid===f)))||{};if(null!==e&&void 0!==e&&e.label_values)return null===e||void 0===e?void 0:e.label_values.map((e=>({name:e.uuid,value:e.value})))}return[]}),[f,a]),k=(0,c.useMemo)((()=>{var e;return!fe().isEmpty(null===a||void 0===a?void 0:a.data)&&fe().isArray(null===a||void 0===a?void 0:a.data)&&(null===a||void 0===a||null===(e=a.data.find((e=>e.uuid===f)))||void 0===e?void 0:e.name)||""}),[f,a]),E=(0,c.useMemo)((()=>!fe().isEmpty(null===a||void 0===a?void 0:a.data)&&fe().isArray(null===a||void 0===a?void 0:a.data)?null===a||void 0===a?void 0:a.data.find((e=>e.uuid===v)):{}),[v]),N=(0,c.useMemo)((()=>{var e;return!fe().isEmpty(null===a||void 0===a?void 0:a.data)&&fe().isArray(null===a||void 0===a?void 0:a.data)&&(null===a||void 0===a||null===(e=a.data.find((e=>e.uuid===y)))||void 0===e?void 0:e.name)||""}),[y,a]),P=()=>{j&&A("")},M=e=>e?D.A.convertToLocalDateTime(e):"",B=e=>{g(e)},O=()=>{x(!1),P()},L=()=>{b(!1),P()},_=[{title:m("metadata.header-name"),field:"name",primary:!0,sortable:!0,type:ye.$.Text,filterable:!0},{title:m("metadata.header-created"),field:"created_at",sortable:!0,type:ye.$.DateTime,filterable:!0,render:M},{title:m("metadata.header-updated"),field:"last_modified",sortable:!0,type:ye.$.DateTime,filterable:!0,render:M},{title:m("metadata.header-values"),field:"uuid",render:e=>(0,ie.jsx)(T.A,{title:m("metadata.tooltip-edit"),children:(0,ie.jsx)(I.A,{variant:"contained",color:"primary",size:"small",onClick:()=>B(e),children:(0,ie.jsx)(we.A,{})})})},{title:m("metadata.header-edit"),field:"uuid",render:e=>(0,ie.jsx)(T.A,{title:m("metadata.tooltip-edit"),children:(0,ie.jsx)(I.A,{variant:"contained",color:"primary",size:"small",onClick:()=>b(e),children:(0,ie.jsx)(z.A,{})})})},{title:m("metadata.header-delete"),field:"uuid",render:e=>(0,ie.jsx)(T.A,{title:m("metadata.tooltip-delete"),children:(0,ie.jsx)(I.A,{variant:"contained",color:"primary",size:"small",onClick:()=>C(e),children:(0,ie.jsx)(ge.A,{})})})}],U=m("metadata.title"),F={rowsPerPage:20,showPagination:!1,noContentText:m("metadata.empty-content"),excludePrimaryFromDetails:!0,applyFilters:!0,isDarkHeader:!0};return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(Ce.f,{title:U,ActionComponent:(0,ie.jsx)(ie.Fragment,{children:(0,ie.jsx)(h.A,{variant:"outlined",color:"primary",onClick:()=>x(!0),children:m("metadata.panel-btn-add")})})}),(0,ie.jsx)(ve.A,{tableData:a,tableColumns:_,tableOptions:F}),(0,ie.jsx)(Pe,{title:m("metadata.dialog-create-title"),isOpen:p,metadataNames:S,validationError:j,onClose:O,onSubmit:async(e,a)=>{try{const n=await i(t,e,a);l(t),O(),a&&B(null===n||void 0===n?void 0:n.uuid)}catch(n){A(n.message)}}}),(0,ie.jsx)(Pe,{title:m("metadata.dialog-edit-title"),isOpen:Boolean(v),metadataNames:S,validationError:j,defaultName:(null===E||void 0===E?void 0:E.name)||"",defaultIsDropDown:null===E||void 0===E?void 0:E.is_dropdown,onClose:L,onSubmit:async(e,a)=>{try{await n(t,v,e,a),l(t),L()}catch(i){A(i.message)}}}),(0,ie.jsx)(ze,{title:m("metadata.dialog-values-edit-title"),description:m("metadata.dialog-values-edit-description",{name:k}),isOpen:Boolean(f),defaultValues:w,onClose:()=>{g("")},onLoadMetadata:()=>{l(t)},onCreate:async e=>{await r(t,f,e)},onUpdate:async(e,a)=>{await s(t,f,e,a)},onDelete:async e=>{await d(t,f,e)}},f),y?(0,ie.jsx)(je.Z,{isOpen:Boolean(y),title:m("metadata.dialog-delete-alert-title"),text:m("metadata.dialog-delete-alert-description",{name:N}),onConfirm:async()=>{try{await o(t,y),C(""),l(t)}catch(e){A(e.message)}},onCancel:()=>C(""),cancelText:m("dialog-confirm-delete.cancel"),confirmText:m("dialog-confirm-delete.delete")}):null]})};var We=a(34294);const Ve=()=>(0,ae.A)((e=>({root:{flexGrow:1},resetedTab:{padding:0},mainHeader:{paddingLeft:10},box:{minHeight:400,paddingRight:5,paddingBottom:20},actionsBtns:{marginLeft:"auto",alignItems:"center",display:"flex"},summaryPanel:{minHeight:"70vh",background:e.backgroundElements},redreshButton:{marginTop:e.spacing(1)},rightAlign:{marginLeft:"auto",flat:"right"}})))();function Re(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}const $e=e=>{let{className:t,onClick:a,children:l,color:i}=e;return(0,ie.jsx)(h.A,{className:t,onClick:a,color:i,children:l})},He=e=>{let{projectData:t,labelValues:a,labels:l,metadataData:i,labelsIsFetching:n,defaultLabel:o,loadProjectSummaryData:r,loadProjectData:s,createLabelValue:d,updateLabelValue:h,deleteLabelValue:S,loadMetadata:w,createMetadata:D,updateMetadata:T,deleteMetadata:k,createMetadataValue:E,updateMetadataValue:N,deleteMetadataValue:I}=e;const P=Ve(),M=(0,m.useHistory)(),{t:B}=(0,u.B)("projects"),{projectUUID:O}=(0,m.useParams)(),[L,_]=(0,c.useState)(0),[U,z]=(0,c.useState)(0),F=()=>{r(O)},W=(0,y.M5)(),V=(0,y.fN)();return(0,ie.jsx)(f.A,{className:P.box,children:(0,ie.jsx)(g.Ay,{container:!0,children:(0,ie.jsxs)(g.Ay,{container:!0,className:P.grid,children:[(0,ie.jsx)(g.Ay,{item:!0,xs:12,children:(0,ie.jsx)(f.A,{mb:2,children:(0,ie.jsx)(xe.A,{title:B(V?"project-control-panel.small-header":"project-control-panel.header",{projectName:W(t.name)}),actionsBtns:(0,ie.jsx)(We.U,{variant:"outlined",color:"primary",onClick:()=>{M.push(C.bw.MAIN.HOME.path)},tooltip:B("project-summary.change-project-btn"),text:B("project-summary.change-project-btn"),icon:(0,ie.jsx)(x.A,{})})})})}),(0,ie.jsxs)(g.Ay,{item:!0,xs:12,children:[(0,ie.jsx)(v.A,{elevation:0,children:(0,ie.jsx)(f.A,{mb:2,children:(0,ie.jsxs)(b.A,{id:"projectSummaryTabList",value:L,onChange:(e,t)=>{_(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",children:[(0,ie.jsx)(j.A,{label:"Overview",...Re(0)}),(0,ie.jsx)(j.A,{label:"Queries",...Re(2)}),(0,ie.jsx)(j.A,{label:"Pipelines",...Re(2)}),(0,ie.jsx)(j.A,{label:"Models",...Re(4)}),(0,ie.jsx)(j.A,{label:"Project Settings",...Re(5)}),(0,ie.jsx)(f.A,{className:P.actionsBtns,children:(0,ie.jsx)($e,{variant:"contained",color:"primary",className:P.rightAlign,onClick:e=>(r(O),void s(O)),children:(0,ie.jsx)(p.A,{})})})]})})}),(0,ie.jsx)(pe.A,{p:0,value:L,index:0,children:(0,ie.jsx)(de,{})}),(0,ie.jsx)(pe.A,{p:0,value:L,index:1,children:(0,ie.jsx)(ce.A,{onUpdateProjectAction:F})}),(0,ie.jsx)(pe.A,{p:0,value:L,index:2,children:(0,ie.jsx)(ue.A,{onUpdateProjectAction:F})}),(0,ie.jsx)(pe.A,{p:0,value:L,index:3,classes:{root:P.resetedTab},children:(0,ie.jsx)(me.A,{})}),(0,ie.jsxs)(pe.A,{p:0,value:L,index:4,classes:{root:P.resetedTab},children:[(0,ie.jsxs)(b.A,{id:"projectSummaryTabList",value:U,onChange:(e,t)=>{z(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",children:[(0,ie.jsx)(j.A,{label:"Segment Labels",...Re(1)}),(0,ie.jsx)(j.A,{label:"Metadata",...Re(1)})]}),(0,ie.jsx)(A.A,{}),(0,ie.jsx)(pe.A,{p:0,mt:0,value:U,index:0,children:(0,ie.jsx)(Se,{projectUUID:O,defaultLabel:o,labelValues:{data:a,isFetching:n},labels:l,createLabel:d,updateLabel:h,deleteLabel:S})}),(0,ie.jsx)(pe.A,{p:0,mt:0,value:U,index:1,children:(0,ie.jsx)(Fe,{projectUUID:O,metadata:{data:i,isFetching:!1},loadMetadata:w,createMetadata:D,updateMetadata:T,deleteMetadata:k,createMetadataValue:E,updateMetadataValue:N,deleteMetadataValue:I})})]})]})]})})})},qe={loadProjectData:i.SN,loadProjectSummaryData:i.yZ,setIsMainScreenLoading:l.AG,setSelectedProject:i.NR,createLabelValue:n.QM,updateLabelValue:n.rq,deleteLabelValue:n.d,loadMetadata:o._G,createMetadata:o.wR,updateMetadata:o.D5,deleteMetadata:o.$u,createMetadataValue:o.JC,updateMetadataValue:o.WV,deleteMetadataValue:o.qs},Ge=(0,d.Ng)((e=>{var t,a,l,i,n,o;return{projectData:(null===e||void 0===e||null===(t=e.projects)||void 0===t?void 0:t.selectedProject)||{},defaultLabel:(0,r.g5)(e),labelValues:(0,r.LN)()(e),labels:(null===(a=e.labels)||void 0===a?void 0:a.data)||[],metadataData:(0,s._8)(e),metadataDataIsFetching:(null===(l=e.metadata)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.isFetching)||!1,labelsIsFetching:(null===(n=e.labels)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.isFetching)||!1}}),qe)(He)},16932:(e,t,a)=>{a.d(t,{AG:()=>u,Ay:()=>d,_8:()=>c,cH:()=>s});var l=a(53536),i=a.n(l),n=a(52437),o=a(34815),r=a(61689);const s=e=>t=>{var a,l;return i().isEmpty(null===(a=t.metadata)||void 0===a?void 0:a.data)?{}:(null===(l=t.metadata)||void 0===l?void 0:l.data.find((t=>t.uuid===e)))||{}},d=e=>{var t,a;return i().isEmpty(null===(t=e.metadata)||void 0===t?void 0:t.data)?[]:null===(a=e.metadata)||void 0===a?void 0:a.data.map((e=>({...e,label_values:i().isEmpty(null===e||void 0===e?void 0:e.label_values)?[]:e.label_values.sort(((e,t)=>(0,r.tu)(e.value,t.value)))})))},c=e=>{var t,a;return i().isEmpty(null===(t=e.metadata)||void 0===t?void 0:t.data)?[]:null===(a=e.metadata)||void 0===a?void 0:a.data.map((e=>({...e,label_values:i().isEmpty(null===e||void 0===e?void 0:e.label_values)?[]:e.label_values.sort(((e,t)=>(0,r.tu)(e.value,t.value)))})))},u=e=>{var t,a;return i().isEmpty(null===(t=e.metadata)||void 0===t?void 0:t.data)?[]:null===(a=e.metadata)||void 0===a?void 0:a.data.filter((e=>null===e||void 0===e?void 0:e.metadata)).map((e=>({title:null===e||void 0===e?void 0:e.name,field:null===e||void 0===e?void 0:e.name,lookup:i().isArray(e.label_values)?e.label_values.reduce(((e,t)=>(e[t.value]=t.value,e)),{}):[],formType:e.is_dropdown?o.XF.FORM_SELECT_TYPE:o.XF.FORM_STRING_TYPE,sortable:!0,filterable:!0,type:n.$.Text})))}}}]);
//# sourceMappingURL=830.5890e485.chunk.js.map